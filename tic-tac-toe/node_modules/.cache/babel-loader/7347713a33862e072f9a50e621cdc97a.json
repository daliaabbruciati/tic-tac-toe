{"ast":null,"code":"var _jsxFileName = \"/Users/daliaabbruciati/Desktop/tutorial/tic-tac-toe/tic-tac-toe/src/components/game.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Cell } from \"./cell\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PLAYER = {\n  PL1: 'X',\n  PL2: 'O',\n  NOBODY: 'Nobody won!'\n};\nconst initialState = {\n  board: Array(9).fill(''),\n  turn: PLAYER.PL1,\n  winner: '',\n  history: [Array(9).fill('')],\n  indexHistory: 0,\n  currentStep: 0\n};\n\nconst useLocalStorageState = (key, initialValue) => {\n  _s();\n\n  const [state, setState] = useState(() => {\n    const localData = localStorage.getItem(key);\n\n    if (localData) {\n      return JSON.parse(localData);\n    }\n\n    return initialValue;\n  });\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [key, state]);\n  return [state, setState];\n};\n\n_s(useLocalStorageState, \"WIhBaeoiwpe+DeUD+8FcYnfbnnM=\");\n\nexport const Game = () => {\n  _s2();\n\n  const [gameState, setGameState] = useLocalStorageState('gameState', initialState);\n  const {\n    board,\n    turn,\n    winner,\n    history,\n    indexHistory,\n    currentStep\n  } = gameState;\n  const newHistory = history.slice(0, currentStep + 1);\n\n  const checkWinner = index => {\n    const combos = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\n    for (let combo of combos) {\n      const [a, b, c] = combo.map(index => board[index]);\n      if (a !== '' && a === b && b === c) gameState.winner = `Winner: player ${board[index]} ðŸŽ‰ðŸ¥³`;\n    }\n  };\n\n  const status = () => {\n    return winner ? winner : board.every(item => item !== '') ? PLAYER.NOBODY : `Player ${turn}, it's your turn`;\n  };\n\n  const onClickBoard = index => {\n    if (turn === PLAYER.PL1) {\n      board[index] = PLAYER.PL1;\n      gameState.turn = PLAYER.PL2;\n    }\n\n    if (turn === PLAYER.PL2) {\n      board[index] = PLAYER.PL2;\n      gameState.turn = PLAYER.PL1;\n    }\n\n    setGameState({ ...gameState,\n      history: [...newHistory, [...board]],\n      indexHistory: index,\n      currentStep: newHistory.length\n    });\n  };\n\n  checkWinner(indexHistory);\n\n  const onClickShowHistory = index => {\n    setGameState({ ...gameState,\n      board: JSON.parse(JSON.stringify(history[index])),\n      turn: index % 2 === 0 ? PLAYER.PL1 : PLAYER.PL2,\n      currentStep: index,\n      winner: ''\n    });\n  };\n\n  const onClickRestart = () => {\n    setGameState({\n      board: Array(9).fill(''),\n      turn: PLAYER.PL1,\n      winner: '',\n      history: [Array(9).fill('')],\n      currentStep: 0\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: status()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Cell, {\n      board: board,\n      disable: winner,\n      onClick: winner ? e => e.preventDefault : onClickBoard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board__snapshot\",\n      children: history.map((item, index) => {\n        const isCurrentStep = index === currentStep;\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"board__btn-snapshot\",\n          disabled: isCurrentStep,\n          onClick: () => onClickShowHistory(index),\n          children: index\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"board__btn-restart\",\n      disabled: currentStep === 0,\n      onClick: onClickRestart,\n      children: \"Restart!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(Game, \"8reesDWBEGeXOcLFYcCURPezy/o=\", false, function () {\n  return [useLocalStorageState];\n});\n\n_c = Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useState","Cell","PLAYER","PL1","PL2","NOBODY","initialState","board","Array","fill","turn","winner","history","indexHistory","currentStep","useLocalStorageState","key","initialValue","state","setState","localData","localStorage","getItem","JSON","parse","setItem","stringify","Game","gameState","setGameState","newHistory","slice","checkWinner","index","combos","combo","a","b","c","map","status","every","item","onClickBoard","length","onClickShowHistory","onClickRestart","e","preventDefault","isCurrentStep"],"sources":["/Users/daliaabbruciati/Desktop/tutorial/tic-tac-toe/tic-tac-toe/src/components/game.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {Cell} from \"./cell\";\n\nconst PLAYER = {\n    PL1:'X',\n    PL2: 'O',\n    NOBODY: 'Nobody won!'\n}\n\nconst initialState = {\n    board: Array(9).fill(''),\n    turn: PLAYER.PL1,\n    winner: '',\n    history: [Array(9).fill('')],\n    indexHistory: 0,\n    currentStep: 0\n}\n\nconst useLocalStorageState = (key, initialValue) => {\n    const [state, setState] = useState(() => {\n        const localData = localStorage.getItem(key)\n        if (localData) {\n            return JSON.parse(localData)\n        }\n        return initialValue\n    })\n\n    useEffect(() => {\n        localStorage.setItem(key, JSON.stringify(state))\n    }, [key, state])\n\n    return [state, setState]\n}\n\n\nexport const Game = () => {\n\n    const [gameState, setGameState] = useLocalStorageState('gameState', initialState)\n    const {board, turn, winner, history, indexHistory, currentStep} = gameState\n\n    const newHistory = history.slice(0, currentStep + 1);\n\n    const checkWinner = (index) => {\n        const combos = [\n            [0, 1, 2],\n            [3, 4, 5],\n            [6, 7, 8],\n            [0, 3, 6],\n            [1, 4, 7],\n            [2, 5, 8],\n            [0, 4, 8],\n            [2, 4, 6]\n        ]\n\n        for (let combo of combos) {\n            const [a, b, c] = combo.map(index => board[index])\n            if (a !== '' && a === b && b === c) gameState.winner = `Winner: player ${board[index]} ðŸŽ‰ðŸ¥³`\n        }\n    }\n\n    const status = () => {\n        return winner\n            ? winner\n            : board.every(item => item !== '')\n                ? PLAYER.NOBODY\n                : `Player ${turn}, it's your turn`\n    }\n\n    const onClickBoard = (index) => {\n        if (turn === PLAYER.PL1) {\n            board[index] = PLAYER.PL1\n            gameState.turn = PLAYER.PL2\n        }\n        if (turn === PLAYER.PL2){\n            board[index] = PLAYER.PL2\n            gameState.turn = PLAYER.PL1\n        }\n        setGameState({\n            ...gameState,\n            history: [...newHistory, [...board]],\n            indexHistory: index,\n            currentStep: newHistory.length\n        })\n    }\n\n    checkWinner(indexHistory)\n\n\n    const onClickShowHistory = (index) => {\n        setGameState({\n            ...gameState,\n            board: JSON.parse(JSON.stringify(history[index])),\n            turn: index % 2 === 0 ? PLAYER.PL1 : PLAYER.PL2,\n            currentStep: index,\n            winner: ''\n        })\n    }\n\n    const onClickRestart = () => {\n        setGameState({\n            board: Array(9).fill(''),\n            turn: PLAYER.PL1,\n            winner: '',\n            history: [Array(9).fill('')],\n            currentStep: 0\n        })\n    }\n\n\n    return (\n        <div className='board'>\n            <h2>{status()}</h2>\n            <Cell board={board} disable={winner} onClick={winner ? (e) => e.preventDefault : onClickBoard}/>\n            <div className='board__snapshot'>\n                {history.map((item, index) => {\n                        const isCurrentStep = index === currentStep\n                        return (\n                            <button\n                                key={index}\n                                className='board__btn-snapshot'\n                                disabled={isCurrentStep}\n                                onClick={() => onClickShowHistory(index)}>\n                                {index}\n                            </button>\n                        )\n                    }\n                )}\n            </div>\n            <button\n                className='board__btn-restart'\n                disabled={currentStep === 0}\n                onClick={onClickRestart}>\n                Restart!\n            </button>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}